(this["webpackJsonpkeep-the-lights-on"]=this["webpackJsonpkeep-the-lights-on"]||[]).push([[0],{99:function(e,t,r){"use strict";r.r(t);var a,s=r(120),n=r(0),c=r.n(n),i=r(24),o=r.n(i),u=r(29),l=r(125),d=r(49),h=r(114),b=r(118),j=r(119),m=r(111),O=r(126),p=r(113),x=r(18),f=function(e){return x.a.fromMantissaExponent(e.man,e.exp)},y=function(e){var t=new x.a(e);return{man:t.mantissa,exp:t.exponent}},v=function(e,t){return y(x.a.add(f(e),f(t)))},g=function(e,t){return y(x.a.subtract(f(e),f(t)))},w=function(e,t){return y(x.a.multiply(f(e),f(t)))},P=function(e,t){return y(x.a.divide(f(e),f(t)))},C=function(e,t){return y(x.a.max(f(e),f(t)))},S=function(e,t){return y(x.a.min(f(e),f(t)))},A=function(e,t){return x.a.compare(f(e),f(t))},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=f(e);return r.lt(new x.a(1e4))?r.trunc().eq(r)?r.toFixed(0):r.toFixed(t):r.toExponential(3)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=f(e);return r.lt(new x.a(1e3))?t&&r.trunc().eq(r)?r.toFixed(0):r.toFixed(2):r.toExponential(3)},k=r(53),R=r(11);!function(e){e.hamsters="hamsters",e.pinwheels="pinwheels",e.bicycle="bicycle"}(a||(a={}));var I,z={hamsters:{name:"Hamster",colorText:"Watch those little legs go!",baseCost:y(.25),costOfNthGenerator:function(e){return y(.25*e)}},pinwheels:{name:"Pinwheel",colorText:"One day you'll build a great wind farm.",baseCost:y(2),costOfNthGenerator:function(e){return y(2*e)}},bicycle:{name:"Human-powered Bicycle",colorText:"You can make it up the hill, just keep pedaling!",baseCost:y(20),costOfNthGenerator:function(e){return y(5*(e-1)+20)}}},E=Object.keys(a).sort((function(e,t){return A(z[e].baseCost,z[t].baseCost)})),T={hamsters:{numberOwned:0,wattsPerDay:y(.5),nextPurchaseCost:z.hamsters.baseCost},pinwheels:{numberOwned:0,wattsPerDay:y(2),nextPurchaseCost:z.pinwheels.baseCost},bicycle:{numberOwned:0,wattsPerDay:y(10),nextPurchaseCost:z.pinwheels.baseCost}},H=function(e,t){return-1!==A(e,t.nextPurchaseCost)};!function(e){e.juniorResearchAssistant="juniorResearchAssistant",e.researchAssistant="researchAssistant"}(I||(I={}));var N,F={juniorResearchAssistant:{name:"Junior Research Assistant",colorText:"Maybe recruiting your 12 year old cousin wasn't the best idea.",baseCost:y(5),costOfNthResearcher:function(e){return y(2*e+3)}},researchAssistant:{name:"Research Assistant",colorText:"The honors students from your high school are interested in your project. They might be helpful.",baseCost:y(25),costOfNthResearcher:function(e){return y(10*e+15)}}},M=Object.keys(I).sort((function(e,t){return A(F[e].baseCost,F[t].baseCost)})),W={juniorResearchAssistant:{numberEmployed:0,ideasPerDay:y(.5),nextPurchaseCost:F.juniorResearchAssistant.baseCost},researchAssistant:{numberEmployed:0,ideasPerDay:y(3),nextPurchaseCost:F.researchAssistant.baseCost}},$=function(e,t){return-1!==A(e,t.nextPurchaseCost)},J={daysElapsed:y(0),ticksPerDay:16,cashAvailable:y(1),maxCashAvailable:y(0),cashEarnedPerDay:y(0),homesPowered:y(0),homesInPowerGrid:y(1),wattsUsedPerHomePerDay:y(20),pricePerWatt:y(.03),wattsGeneratedPerDay:y(0),ideasAvailable:y(0),maxIdeasAvailable:y(0),ideasGeneratedPerDay:y(0)},U=function(e,t){var r=function(e,t){var r=e.daysElapsed;return t%e.ticksPerDay===0?v(r,y(1)):r}(e,t),a=function(e){var t=e.ticksPerDay,r=e.cashAvailable,a=e.homesInPowerGrid,s=e.wattsUsedPerHomePerDay,n=e.pricePerWatt,c=e.wattsGeneratedPerDay,i=S(c,w(a,s)),o=w(i,n);return v(r,P(o,y(t)))}(e),s=C(a,e.maxCashAvailable),n=function(e){var t=e.ticksPerDay,r=e.ideasAvailable,a=e.ideasGeneratedPerDay,s=P(a,y(t));return v(r,s)}(e),c=C(n,e.maxCashAvailable);return Object(R.a)(Object(R.a)({},e),{},{daysElapsed:r,cashAvailable:a,maxCashAvailable:s,ideasAvailable:n,maxIdeasAvailable:c})},q=function(e,t,r){var a,s=function(e){return Object.values(e).reduce((function(e,t){return v(e,w(y(t.numberOwned),t.wattsPerDay))}),y(0))}(t),n=S(s,w(e.homesInPowerGrid,e.wattsUsedPerHomePerDay)),c=w(n,e.pricePerWatt),i=S(e.homesInPowerGrid,P(s,e.wattsUsedPerHomePerDay)),o=(a=r,Object.values(a).reduce((function(e,t){return v(e,w(y(t.numberEmployed),t.ideasPerDay))}),y(0)));return Object(R.a)(Object(R.a)({},e),{},{cashEarnedPerDay:c,homesPowered:i,wattsGeneratedPerDay:s,ideasGeneratedPerDay:o})},B=function(e,t){var r=g(e.cashAvailable,t);return e.cashAvailable=r,e};!function(e){e.expandGrid1="expandGrid1",e.expandGrid2="expandGrid2"}(N||(N={}));var L,Y=[{identifier:N.expandGrid1,name:"Power the Street",description:"Expand your power grid to provide power to your whole street",cost:y(100),requiresResearchProjects:[],applyResearch:function(e){return e.currentStatistics.homesInPowerGrid=y(10),e}},{identifier:N.expandGrid2,name:"Power the Neighborhood",description:"Expand your power grid to provide power to your whole street",cost:y(2e3),requiresResearchProjects:[],applyResearch:function(e){return e.currentStatistics.homesInPowerGrid=y(100),e}}],K={currentStatistics:J,generators:T,researchers:W,purchasedResearchProjects:[]},Q=Object(k.b)({name:"game",initialState:K,reducers:{tick:function(e,t){e.currentStatistics=U(e.currentStatistics,t.payload)},updateTicksPerDay:function(e,t){e.currentStatistics.ticksPerDay=t.payload},buyGenerator:function(e,t){var r=t.payload,a=e.currentStatistics,s=e.generators,n=e.researchers,c=a.cashAvailable,i=s[r];if(H(c,i)){var o=i.nextPurchaseCost;e.generators[r]=function(e,t){var r=t.numberOwned,a=z[e].costOfNthGenerator(r+2);return Object(R.a)(Object(R.a)({},t),{},{numberOwned:r+1,nextPurchaseCost:a})}(r,i),e.currentStatistics=B(a,o),e.currentStatistics=q(a,s,n)}},buyResearcher:function(e,t){var r=t.payload,a=e.currentStatistics,s=e.generators,n=e.researchers,c=a.cashAvailable,i=n[r];if($(c,i)){var o=i.nextPurchaseCost;e.researchers[r]=function(e,t){var r=t.numberEmployed,a=F[e].costOfNthResearcher(r+2);return Object(R.a)(Object(R.a)({},t),{},{numberEmployed:r+1,nextPurchaseCost:a})}(r,i),e.currentStatistics=B(a,o),e.currentStatistics=q(a,s,n)}},purchaseResearchProject:function(e,t){var r=Y.find((function(e){return e.identifier===t.payload}));r&&-1!==A(e.currentStatistics.ideasAvailable,r.cost)&&((e=r.applyResearch(e)).currentStatistics.ideasAvailable=g(e.currentStatistics.ideasAvailable,r.cost),e.purchasedResearchProjects.push(t.payload))},resetGame:function(e,t){return t.payload?t.payload:K}}}),V=Q.actions,X=V.tick,Z=V.buyGenerator,_=V.buyResearcher,ee=V.purchaseResearchProject,te=(V.updateTicksPerDay,V.resetGame),re=function(e){return e.game},ae=function(e){return e.game.generators},se=function(e){return e.game.researchers},ne=function(e){return e.game.currentStatistics.ticksPerDay},ce=function(e){return e.game.currentStatistics},ie=function(e){return e.game.currentStatistics.cashAvailable},oe=function(e){return e.game.currentStatistics.maxCashAvailable},ue=function(e){return e.game.currentStatistics.ideasAvailable},le=function(e){return e.game.currentStatistics.maxIdeasAvailable},de=function(e){return e.game.purchasedResearchProjects},he=(Q.reducer,function(){return Object(u.b)()}),be=u.c,je=r(3),me=function(e){var t=be(ce),r=t.daysElapsed,a=t.cashAvailable,s=t.cashEarnedPerDay,n=t.homesPowered,c=t.homesInPowerGrid,i=t.wattsUsedPerHomePerDay,o=t.pricePerWatt,u=t.wattsGeneratedPerDay,l=t.ideasAvailable,d=t.ideasGeneratedPerDay,h=w(y(100),P(n,c));return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(m.a,{as:"h1",size:"md",pb:2,children:"Keep the Lights On"}),Object(je.jsxs)(O.c,{pt:4,align:"stretch",spacing:4,children:[Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"sm",pb:1,children:"Time Elapsed"}),Object(je.jsxs)(p.a,{children:[G(r)," days"]})]}),Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"sm",pb:1,children:"Funds"}),Object(je.jsxs)(p.a,{pb:1,children:["$",D(a)]}),Object(je.jsxs)(p.a,{fontSize:"sm",color:"gray.400",children:["$",D(s)," per day"]})]}),Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"sm",pb:1,children:"Power Generation"}),Object(je.jsxs)(p.a,{pb:1,children:[G(u)," watts per day"]}),Object(je.jsxs)(p.a,{fontSize:"sm",color:"gray.400",children:["$",D(o)," per watt"]})]}),Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"sm",pb:1,children:"Houses Illuminated"}),Object(je.jsxs)(p.a,{pb:1,children:[G(n,2)," / ",G(c)]}),Object(je.jsxs)(p.a,{pb:1,color:n===c?void 0:"red.500",children:[G(h),"%"]}),Object(je.jsxs)(p.a,{fontSize:"sm",color:"gray.400",children:[G(i)," watts used per house per day"]})]}),Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"sm",pb:1,children:"Research"}),Object(je.jsxs)(p.a,{pb:1,children:[G(l)," ideas"]}),Object(je.jsxs)(p.a,{fontSize:"sm",color:"gray.400",children:[G(d)," ideas per day"]})]})]})]})},Oe=r(122),pe=function(e){return Object(je.jsx)(h.a,{children:"Track your progress here"})},xe=r(123),fe=function(e){var t=he(),r=be(ie),a=be(oe),s=be(ae);return Object(je.jsx)(O.c,{align:"stretch",spacing:4,children:E.map((function(e){var n=s[e],c=z[e];return-1===A(a,w(y(.75),c.baseCost))?null:Object(je.jsxs)(O.b,{children:[Object(je.jsxs)(m.a,{as:"h2",size:"sm",pb:1,children:[c.name," x ",n.numberOwned]}),Object(je.jsxs)(p.a,{pb:2,fontSize:"sm",color:"gray.400",children:["Generates ",G(n.wattsPerDay)," watts per day -- ",c.colorText]}),Object(je.jsxs)(xe.a,{onClick:function(){return t(Z(e))},disabled:!H(r,n),children:["Buy for $",D(n.nextPurchaseCost,!0)]})]},e)}))})},ye=w(y(.75),F[I.juniorResearchAssistant].baseCost),ve=function(e){var t=he(),r=be(ie),a=be(oe),s=be(ue),n=be(le),c=be(se),i=be(de);return 1!==A(a,ye)?Object(je.jsx)(p.a,{fontStyle:"italic",color:"gray.400",children:"If you collect enough money, maybe you can hire staff to research improvements."}):Object(je.jsxs)(O.c,{align:"stretch",spacing:8,children:[Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"md",pb:4,children:"Researchers"}),Object(je.jsx)(O.c,{align:"stretch",spacing:4,children:M.map((function(e){var s=c[e],n=F[e];return-1===A(a,w(y(.75),n.baseCost))?null:Object(je.jsxs)(O.b,{children:[Object(je.jsxs)(m.a,{as:"h3",size:"sm",pb:1,children:[n.name," x ",s.numberEmployed]}),Object(je.jsxs)(p.a,{pb:2,fontSize:"sm",color:"gray.400",children:["Generates ",G(s.ideasPerDay)," ideas per day --"," ",n.colorText]}),Object(je.jsxs)(xe.a,{onClick:function(){return t(_(e))},disabled:!$(r,s),children:["Hire for $",D(s.nextPurchaseCost,!0)]})]},e)}))})]}),Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"md",pb:4,children:"Projects"}),n===y(0)?Object(je.jsx)(p.a,{fontStyle:"italic",color:"gray.400",children:"Hire some researchers, and they might have an idea or two of how to improve your power grid."}):Object(je.jsx)(O.c,{align:"stretch",spacing:4,children:Y.map((function(e){return i.includes(e.identifier)||-1===A(n,w(y(.75),e.cost))?null:Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h3",size:"sm",pb:1,children:e.name}),Object(je.jsx)(p.a,{pb:2,fontSize:"sm",color:"gray.400",children:e.description}),Object(je.jsxs)(xe.a,{onClick:function(){return t(ee(e.identifier))},disabled:1!==A(s,e.cost),children:["Purchase for ",G(e.cost)," ideas"]})]},e.identifier)}))})]})]})},ge=r(4),we=r(84),Pe=r(65),Ce=function(e){var t=Object(we.c)().toggleColorMode,r=Object(we.d)("Switch to Dark Mode","Switch to Light Mode"),a=Object(we.d)(Pe.a,Pe.b);return Object(je.jsx)(xe.a,{leftIcon:Object(je.jsx)(a,{}),onClick:t,children:r})},Se=r(115),Ae=r(124),Ge=r(38),De=function(e){return btoa(JSON.stringify(e))},ke=function(e){try{return JSON.parse(atob(e))}catch(t){return}},Re=function(e){localStorage.setItem("gameSave",De(e))},Ie=Object(Ge.a)((function(e){var t=Object(n.useState)(""),r=Object(ge.a)(t,2),a=r[0],s=r[1],c=be(re),i=Object(Se.a)(a),o=i.hasCopied,u=i.onCopy;return Object(n.useEffect)((function(){s(De(c))}),[s]),Object(je.jsxs)(h.a,Object(R.a)(Object(R.a)({},e),{},{position:"relative",children:[Object(je.jsx)(Ae.a,{readOnly:!0,value:a,height:250}),Object(je.jsx)(xe.a,{onClick:u,variant:"solid",colorScheme:"teal",size:"xs",textTransform:"uppercase",position:"absolute",zIndex:1,top:3,right:6,children:o?"Copied!":"Copy"})]}))})),ze=r(121),Ee=Object(Ge.a)((function(e){var t=Object(n.useState)(""),r=Object(ge.a)(t,2),a=r[0],s=r[1],c=Object(u.b)(),i=Object(ze.a)();return Object(je.jsxs)(h.a,Object(R.a)(Object(R.a)({},e),{},{children:[Object(je.jsx)(Ae.a,{value:a,onChange:function(e){return s(e.target.value)}}),Object(je.jsx)(xe.a,{mt:2,onClick:function(){if(window.confirm("This will overwrite all of your current save data, and cannot be undone. Are you sure you want to continue?")){var e=ke(a);e?(c(te(e)),i({title:"Save Imported",description:"Your game save has been imported successfully!",status:"success",duration:9e3,isClosable:!0,position:"top-right"})):i({title:"Import Failed",description:"Importing the game save failed. Check that you have entered the entire game state.",status:"error",duration:9e3,isClosable:!0,position:"top-right"})}},disabled:!a,children:"Import Data"})]}))})),Te=function(e){var t=be(re);return Object(je.jsx)(xe.a,Object(R.a)(Object(R.a)({},e),{},{onClick:function(){Re(t)},children:"Save"}))},He=function(e){var t=Object(n.useState)(!1),r=Object(ge.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)(!1),i=Object(ge.a)(c,2),o=i[0],u=i[1],l=he();be(ne);return Object(je.jsxs)(O.c,{align:"flex-start",spacing:8,children:[Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"sm",pb:2,children:"Theme"}),Object(je.jsx)(Ce,{})]}),Object(je.jsxs)(O.b,{children:[Object(je.jsx)(m.a,{as:"h2",size:"sm",pb:2,children:"Manual Game Saves"}),Object(je.jsxs)(O.a,{spacing:4,children:[Object(je.jsx)(Te,{}),Object(je.jsx)(xe.a,{onClick:function(){u(!1),s(!a)},children:"Export Game Save"}),Object(je.jsx)(xe.a,{onClick:function(){s(!1),u(!o)},children:"Import Game Save"}),Object(je.jsx)(xe.a,{onClick:function(){window.confirm("This will reset all of your progress with no benefit, and cannot be undone. Are you sure you want to continue?")&&l(te())},children:"Reset"})]}),a&&Object(je.jsx)(Ie,{mt:4}),o&&Object(je.jsx)(Ee,{mt:4})]}),!1]})},Ne=function(e){return Object(je.jsxs)(Oe.e,{children:[Object(je.jsxs)(Oe.b,{children:[Object(je.jsx)(Oe.a,{children:"Generation"}),Object(je.jsx)(Oe.a,{children:"Research"}),Object(je.jsx)(Oe.a,{children:"Achievements"}),Object(je.jsx)(Oe.a,{children:"Settings"})]}),Object(je.jsxs)(Oe.d,{children:[Object(je.jsx)(Oe.c,{children:Object(je.jsx)(fe,{})}),Object(je.jsx)(Oe.c,{children:Object(je.jsx)(ve,{})}),Object(je.jsx)(Oe.c,{children:Object(je.jsx)(pe,{})}),Object(je.jsx)(Oe.c,{children:Object(je.jsx)(He,{})})]})]})},Fe=function(){var e=localStorage.getItem("gameSave");return e?ke(e):void 0}();Fe&&(L={game:Fe});var Me=Object(k.a)({preloadedState:L,reducer:{game:Q.reducer}}),We=0;setInterval((function(){Me.dispatch(X(We)),We=(We+1)%16}),62.5);var $e=Me,Je=r(117),Ue=function(e){var t=be(re);return Object(Je.a)((function(){Re(t)}),3e4),null},qe=function(){return Object(je.jsx)(u.a,{store:$e,children:Object(je.jsxs)(l.a,{theme:d.theme,children:[Object(je.jsx)(Ue,{}),Object(je.jsx)(h.a,{children:Object(je.jsxs)(b.a,{minH:"100vh",direction:"row",alignItems:"stretch",children:[Object(je.jsx)(h.a,{overflow:"auto",w:250,p:3,children:Object(je.jsx)(me,{})}),Object(je.jsx)(h.a,{children:Object(je.jsx)(j.a,{orientation:"vertical"})}),Object(je.jsx)(h.a,{flexGrow:1,overflow:"auto",children:Object(je.jsx)(Ne,{})})]})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(je.jsxs)(c.a.StrictMode,{children:[Object(je.jsx)(s.a,{}),Object(je.jsx)(qe,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[99,1,2]]]);
//# sourceMappingURL=main.1e3c3cb3.chunk.js.map